{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\M PUJITHA\\\\Downloads\\\\realtime-chat-app\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport Chat from \"./pages/Chat\";\nimport JoinRoom from \"./pages/JoinRoom\"; // 1. Import your JoinRoom page\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [auth, setAuth] = useState(() => {\n    const token = localStorage.getItem(\"token\");\n    const user = localStorage.getItem(\"user\");\n    try {\n      return token && user ? {\n        token,\n        user: JSON.parse(user)\n      } : null;\n    } catch (e) {\n      return null;\n    }\n  });\n  useEffect(() => {\n    const syncAuth = () => {\n      const token = localStorage.getItem(\"token\");\n      const user = localStorage.getItem(\"user\");\n      if (!token || !user) {\n        setAuth(null);\n      } else {\n        try {\n          setAuth({\n            token,\n            user: JSON.parse(user)\n          });\n        } catch (e) {\n          setAuth(null);\n        }\n      }\n    };\n    window.addEventListener(\"storage\", syncAuth);\n    return () => window.removeEventListener(\"storage\", syncAuth);\n  }, []);\n  const handleSetAuth = (token, user) => {\n    if (token && user) {\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      setAuth({\n        token,\n        user\n      });\n    } else {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      setAuth(null);\n    }\n  };\n  const isAuthenticated = Boolean(auth);\n  return /*#__PURE__*/_jsxDEV(Router, {\n    future: {\n      v7_startTransition: true,\n      v7_relativeSplatPath: true\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-light\",\n      style: {\n        minHeight: \"100vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: !isAuthenticated ? /*#__PURE__*/_jsxDEV(Login, {\n            setAuth: handleSetAuth\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 41\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/chat\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/register\",\n          element: !isAuthenticated ? /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 41\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/chat\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 56\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/chat\",\n          element: isAuthenticated ? /*#__PURE__*/_jsxDEV(Chat, {\n            setAuth: handleSetAuth,\n            auth: auth\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 40\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/login\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 87\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/join\",\n          element: isAuthenticated ? /*#__PURE__*/_jsxDEV(JoinRoom, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 40\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/login\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: isAuthenticated ? \"/chat\" : \"/login\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 22\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"h0edB2+kcaaGBisjfaCfYUN+EVE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Login","Register","Chat","JoinRoom","jsxDEV","_jsxDEV","App","_s","auth","setAuth","token","localStorage","getItem","user","JSON","parse","e","syncAuth","window","addEventListener","removeEventListener","handleSetAuth","setItem","stringify","removeItem","isAuthenticated","Boolean","future","v7_startTransition","v7_relativeSplatPath","children","className","style","minHeight","path","element","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","_c","$RefreshReg$"],"sources":["C:/Users/M PUJITHA/Downloads/realtime-chat-app/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport Chat from \"./pages/Chat\";\nimport JoinRoom from \"./pages/JoinRoom\"; // 1. Import your JoinRoom page\n\nfunction App() {\n  const [auth, setAuth] = useState(() => {\n    const token = localStorage.getItem(\"token\");\n    const user = localStorage.getItem(\"user\");\n    try {\n      return token && user ? { token, user: JSON.parse(user) } : null;\n    } catch (e) {\n      return null;\n    }\n  });\n\n  useEffect(() => {\n    const syncAuth = () => {\n      const token = localStorage.getItem(\"token\");\n      const user = localStorage.getItem(\"user\");\n      if (!token || !user) {\n        setAuth(null);\n      } else {\n        try {\n          setAuth({ token, user: JSON.parse(user) });\n        } catch (e) {\n          setAuth(null);\n        }\n      }\n    };\n    window.addEventListener(\"storage\", syncAuth);\n    return () => window.removeEventListener(\"storage\", syncAuth);\n  }, []);\n\n  const handleSetAuth = (token, user) => {\n    if (token && user) {\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      setAuth({ token, user });\n    } else {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      setAuth(null);\n    }\n  };\n\n  const isAuthenticated = Boolean(auth);\n\n  return (\n    <Router \n      future={{ \n        v7_startTransition: true, \n        v7_relativeSplatPath: true \n      }}\n    >\n      <div className=\"bg-light\" style={{ minHeight: \"100vh\" }}>\n        <Routes>\n          {/* PUBLIC ROUTES */}\n          <Route\n            path=\"/login\"\n            element={!isAuthenticated ? <Login setAuth={handleSetAuth} /> : <Navigate to=\"/chat\" replace />}\n          />\n          <Route\n            path=\"/register\"\n            element={!isAuthenticated ? <Register /> : <Navigate to=\"/chat\" replace />}\n          />\n\n          {/* PROTECTED ROUTES */}\n          <Route\n            path=\"/chat\"\n            element={isAuthenticated ? <Chat setAuth={handleSetAuth} auth={auth} /> : <Navigate to=\"/login\" replace />}\n          />\n\n          {/* 2. ADDED JOIN ROOM ROUTE */}\n          <Route\n            path=\"/join\"\n            element={isAuthenticated ? <JoinRoom /> : <Navigate to=\"/login\" replace />}\n          />\n\n          {/* FALLBACK */}\n          <Route\n            path=\"*\"\n            element={<Navigate to={isAuthenticated ? \"/chat\" : \"/login\"} replace />}\n          />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,aAAa,IAAIC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AACnF,OAAO,sCAAsC;AAE7C,OAAOC,KAAK,MAAM,eAAe;AACjC,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,IAAI,MAAM,cAAc;AAC/B,OAAOC,QAAQ,MAAM,kBAAkB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzC,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAAC,MAAM;IACrC,MAAMiB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,IAAI,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACzC,IAAI;MACF,OAAOF,KAAK,IAAIG,IAAI,GAAG;QAAEH,KAAK;QAAEG,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACF,IAAI;MAAE,CAAC,GAAG,IAAI;IACjE,CAAC,CAAC,OAAOG,CAAC,EAAE;MACV,OAAO,IAAI;IACb;EACF,CAAC,CAAC;EAEFtB,SAAS,CAAC,MAAM;IACd,MAAMuB,QAAQ,GAAGA,CAAA,KAAM;MACrB,MAAMP,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMC,IAAI,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MACzC,IAAI,CAACF,KAAK,IAAI,CAACG,IAAI,EAAE;QACnBJ,OAAO,CAAC,IAAI,CAAC;MACf,CAAC,MAAM;QACL,IAAI;UACFA,OAAO,CAAC;YAAEC,KAAK;YAAEG,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACF,IAAI;UAAE,CAAC,CAAC;QAC5C,CAAC,CAAC,OAAOG,CAAC,EAAE;UACVP,OAAO,CAAC,IAAI,CAAC;QACf;MACF;IACF,CAAC;IACDS,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEF,QAAQ,CAAC;IAC5C,OAAO,MAAMC,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEH,QAAQ,CAAC;EAC9D,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,aAAa,GAAGA,CAACX,KAAK,EAAEG,IAAI,KAAK;IACrC,IAAIH,KAAK,IAAIG,IAAI,EAAE;MACjBF,YAAY,CAACW,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;MACpCC,YAAY,CAACW,OAAO,CAAC,MAAM,EAAER,IAAI,CAACS,SAAS,CAACV,IAAI,CAAC,CAAC;MAClDJ,OAAO,CAAC;QAAEC,KAAK;QAAEG;MAAK,CAAC,CAAC;IAC1B,CAAC,MAAM;MACLF,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;MAChCb,YAAY,CAACa,UAAU,CAAC,MAAM,CAAC;MAC/Bf,OAAO,CAAC,IAAI,CAAC;IACf;EACF,CAAC;EAED,MAAMgB,eAAe,GAAGC,OAAO,CAAClB,IAAI,CAAC;EAErC,oBACEH,OAAA,CAACT,MAAM;IACL+B,MAAM,EAAE;MACNC,kBAAkB,EAAE,IAAI;MACxBC,oBAAoB,EAAE;IACxB,CAAE;IAAAC,QAAA,eAEFzB,OAAA;MAAK0B,SAAS,EAAC,UAAU;MAACC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAQ,CAAE;MAAAH,QAAA,eACtDzB,OAAA,CAACR,MAAM;QAAAiC,QAAA,gBAELzB,OAAA,CAACP,KAAK;UACJoC,IAAI,EAAC,QAAQ;UACbC,OAAO,EAAE,CAACV,eAAe,gBAAGpB,OAAA,CAACL,KAAK;YAACS,OAAO,EAAEY;UAAc;YAAAe,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAGlC,OAAA,CAACN,QAAQ;YAACyC,EAAE,EAAC,OAAO;YAACC,OAAO;UAAA;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjG,CAAC,eACFlC,OAAA,CAACP,KAAK;UACJoC,IAAI,EAAC,WAAW;UAChBC,OAAO,EAAE,CAACV,eAAe,gBAAGpB,OAAA,CAACJ,QAAQ;YAAAmC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAGlC,OAAA,CAACN,QAAQ;YAACyC,EAAE,EAAC,OAAO;YAACC,OAAO;UAAA;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5E,CAAC,eAGFlC,OAAA,CAACP,KAAK;UACJoC,IAAI,EAAC,OAAO;UACZC,OAAO,EAAEV,eAAe,gBAAGpB,OAAA,CAACH,IAAI;YAACO,OAAO,EAAEY,aAAc;YAACb,IAAI,EAAEA;UAAK;YAAA4B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAGlC,OAAA,CAACN,QAAQ;YAACyC,EAAE,EAAC,QAAQ;YAACC,OAAO;UAAA;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5G,CAAC,eAGFlC,OAAA,CAACP,KAAK;UACJoC,IAAI,EAAC,OAAO;UACZC,OAAO,EAAEV,eAAe,gBAAGpB,OAAA,CAACF,QAAQ;YAAAiC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAGlC,OAAA,CAACN,QAAQ;YAACyC,EAAE,EAAC,QAAQ;YAACC,OAAO;UAAA;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5E,CAAC,eAGFlC,OAAA,CAACP,KAAK;UACJoC,IAAI,EAAC,GAAG;UACRC,OAAO,eAAE9B,OAAA,CAACN,QAAQ;YAACyC,EAAE,EAAEf,eAAe,GAAG,OAAO,GAAG,QAAS;YAACgB,OAAO;UAAA;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEb;AAAChC,EAAA,CAnFQD,GAAG;AAAAoC,EAAA,GAAHpC,GAAG;AAqFZ,eAAeA,GAAG;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}