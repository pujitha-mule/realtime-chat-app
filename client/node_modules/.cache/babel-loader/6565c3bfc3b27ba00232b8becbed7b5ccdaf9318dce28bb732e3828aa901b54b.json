{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\M PUJITHA\\\\Downloads\\\\realtime-chat-app\\\\client\\\\src\\\\pages\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { api } from \"../services/api\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false); // ðŸ‘ˆ Added loading state\n  const navigate = useNavigate();\n\n  // Redirect if already logged in\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      navigate(\"/chat\");\n    }\n  }, [navigate]);\n  const handleLogin = async e => {\n    if (e) e.preventDefault(); // Prevent page refresh\n\n    setError(\"\");\n    setLoading(true);\n    if (!email || !password) {\n      setError(\"Please enter both email and password\");\n      setLoading(false);\n      return;\n    }\n    try {\n      // Your backend logic expects { email, password }\n      const res = await api.post(\"/auth/login\", {\n        email: email.toLowerCase().trim(),\n        // Normalize input\n        password\n      });\n\n      // Store auth info\n      localStorage.setItem(\"token\", res.data.token);\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n\n      // Successfully logged in\n      navigate(\"/chat\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      // âœ… Dynamic error message from your Express backend\n      const serverMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Invalid email or password\";\n      setError(serverMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"350px\",\n      margin: \"80px auto\",\n      padding: \"30px\",\n      border: \"1px solid #ddd\",\n      borderRadius: \"8px\",\n      boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\",\n      backgroundColor: \"#fff\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: \"20px\",\n        color: \"#333\"\n      },\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"#721c24\",\n        backgroundColor: \"#f8d7da\",\n        padding: \"10px\",\n        borderRadius: \"4px\",\n        marginBottom: \"15px\",\n        fontSize: \"14px\",\n        border: \"1px solid #f5c6cb\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"15px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email Address\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        style: {\n          width: \"100%\",\n          padding: \"10px\",\n          borderRadius: \"4px\",\n          border: \"1px solid #ccc\"\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"20px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        style: {\n          width: \"100%\",\n          padding: \"10px\",\n          borderRadius: \"4px\",\n          border: \"1px solid #ccc\"\n        },\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogin,\n      disabled: loading,\n      style: {\n        width: \"100%\",\n        padding: \"10px\",\n        borderRadius: \"4px\",\n        border: \"none\",\n        backgroundColor: loading ? \"#ccc\" : \"#007bff\",\n        color: \"white\",\n        fontWeight: \"bold\",\n        cursor: loading ? \"not-allowed\" : \"pointer\",\n        transition: \"background-color 0.2s\"\n      },\n      children: loading ? \"Logging in...\" : \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: \"20px\",\n        fontSize: \"14px\",\n        textAlign: \"center\",\n        color: \"#666\"\n      },\n      children: [\"Don\\u2019t have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/register\",\n        style: {\n          color: \"#007bff\",\n          textDecoration: \"none\"\n        },\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"bPyafKhY+ieWWMgy1ANdxg+oAcQ=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useEffect","useState","api","useNavigate","Link","jsxDEV","_jsxDEV","Login","_s","email","setEmail","password","setPassword","error","setError","loading","setLoading","navigate","token","localStorage","getItem","handleLogin","e","preventDefault","res","post","toLowerCase","trim","setItem","data","JSON","stringify","user","err","_err$response","_err$response$data","serverMessage","response","message","style","maxWidth","margin","padding","border","borderRadius","boxShadow","backgroundColor","children","textAlign","marginBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","type","placeholder","value","onChange","target","width","required","onClick","disabled","fontWeight","cursor","transition","marginTop","to","textDecoration","_c","$RefreshReg$"],"sources":["C:/Users/M PUJITHA/Downloads/realtime-chat-app/client/src/pages/Login.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { api } from \"../services/api\";\nimport { useNavigate, Link } from \"react-router-dom\";\n\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false); // ðŸ‘ˆ Added loading state\n  const navigate = useNavigate();\n\n  // Redirect if already logged in\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      navigate(\"/chat\");\n    }\n  }, [navigate]);\n\n  const handleLogin = async (e) => {\n    if (e) e.preventDefault(); // Prevent page refresh\n    \n    setError(\"\");\n    setLoading(true);\n\n    if (!email || !password) {\n      setError(\"Please enter both email and password\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // Your backend logic expects { email, password }\n      const res = await api.post(\"/auth/login\", { \n        email: email.toLowerCase().trim(), // Normalize input\n        password \n      });\n\n      // Store auth info\n      localStorage.setItem(\"token\", res.data.token);\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n\n      // Successfully logged in\n      navigate(\"/chat\");\n    } catch (err) {\n      // âœ… Dynamic error message from your Express backend\n      const serverMessage = err.response?.data?.message || \"Invalid email or password\";\n      setError(serverMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ \n      maxWidth: \"350px\", \n      margin: \"80px auto\", \n      padding: \"30px\", \n      border: \"1px solid #ddd\", \n      borderRadius: \"8px\", \n      boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\",\n      backgroundColor: \"#fff\" \n    }}>\n      <h3 style={{ textAlign: \"center\", marginBottom: \"20px\", color: \"#333\" }}>Login</h3>\n\n      {error && (\n        <div style={{ \n          color: \"#721c24\", \n          backgroundColor: \"#f8d7da\", \n          padding: \"10px\", \n          borderRadius: \"4px\", \n          marginBottom: \"15px\", \n          fontSize: \"14px\",\n          border: \"1px solid #f5c6cb\" \n        }}>\n          {error}\n        </div>\n      )}\n\n      <div style={{ marginBottom: \"15px\" }}>\n        <input\n          type=\"email\"\n          placeholder=\"Email Address\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          style={{ width: \"100%\", padding: \"10px\", borderRadius: \"4px\", border: \"1px solid #ccc\" }}\n          required\n        />\n      </div>\n\n      <div style={{ marginBottom: \"20px\" }}>\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          style={{ width: \"100%\", padding: \"10px\", borderRadius: \"4px\", border: \"1px solid #ccc\" }}\n          required\n        />\n      </div>\n\n      <button\n        onClick={handleLogin}\n        disabled={loading}\n        style={{ \n          width: \"100%\", \n          padding: \"10px\", \n          borderRadius: \"4px\", \n          border: \"none\", \n          backgroundColor: loading ? \"#ccc\" : \"#007bff\", \n          color: \"white\", \n          fontWeight: \"bold\",\n          cursor: loading ? \"not-allowed\" : \"pointer\",\n          transition: \"background-color 0.2s\"\n        }}\n      >\n        {loading ? \"Logging in...\" : \"Login\"}\n      </button>\n\n      <p style={{ marginTop: \"20px\", fontSize: \"14px\", textAlign: \"center\", color: \"#666\" }}>\n        Donâ€™t have an account? <Link to=\"/register\" style={{ color: \"#007bff\", textDecoration: \"none\" }}>Register</Link>\n      </p>\n    </div>\n  );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}