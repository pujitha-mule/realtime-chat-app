{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\M PUJITHA\\\\Downloads\\\\realtime-chat-app\\\\client\\\\src\\\\pages\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useCallback } from \"react\";\nimport api from \"../services/api\";\nimport ChatBox from \"../components/ChatBox\";\nimport RoomList from \"../components/RoomList\";\nimport socket from \"../services/socket\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chat({\n  setToken\n}) {\n  _s();\n  var _users$find;\n  const [rooms, setRooms] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [currentRoom, setCurrentRoom] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isCreating, setIsCreating] = useState(false);\n  const [isJoining, setIsJoining] = useState(false);\n  const [inviteCodeInput, setInviteCodeInput] = useState(\"\");\n  const [newRoomData, setNewRoomData] = useState({\n    name: \"\",\n    isPrivate: false,\n    showHistoryToNewMembers: true // Default to true\n  });\n  const navigate = useNavigate();\n  const handleLogout = useCallback(() => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    if (setToken) setToken(null);\n    socket.disconnect();\n    navigate(\"/login\");\n  }, [navigate, setToken]);\n\n  /* ================= INITIAL LOAD ================= */\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (!storedUser) {\n      handleLogout();\n      return;\n    }\n    const parsedUser = JSON.parse(storedUser);\n    setUser(parsedUser);\n    socket.connect();\n    const fetchData = async () => {\n      try {\n        const [roomsRes, usersRes] = await Promise.all([api.get(\"/rooms\"), api.get(\"/auth/users\")]);\n        setRooms(roomsRes.data);\n        setUsers(usersRes.data);\n      } catch (err) {\n        var _err$response;\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) handleLogout();\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n    return () => {\n      socket.off(\"receive_message\");\n      socket.disconnect();\n    };\n  }, [handleLogout]);\n\n  /* ================= ROOM SYNC ================= */\n  useEffect(() => {\n    if (!currentRoom || !user) return;\n    const roomId = currentRoom._id;\n    socket.emit(\"join_room\", {\n      roomId,\n      username: user.username\n    });\n\n    // Fetch message history based on backend logic\n    api.get(`/messages/${roomId}`).then(res => setMessages(res.data)).catch(err => console.error(\"Message fetch error:\", err));\n    const handleReceive = msg => {\n      if (msg.roomId === roomId) {\n        setMessages(prev => [...prev, msg]);\n      }\n    };\n    socket.on(\"receive_message\", handleReceive);\n    return () => {\n      socket.off(\"receive_message\", handleReceive);\n    };\n  }, [currentRoom, user]);\n\n  /* ================= HANDLERS ================= */\n  const onSendMessage = async (content, file = null) => {\n    if (!currentRoom) return;\n    try {\n      let newMessage;\n      if (file) {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"roomId\", currentRoom._id);\n        const res = await api.post(\"/messages/upload\", formData);\n        newMessage = res.data;\n      } else {\n        const res = await api.post(\"/messages\", {\n          roomId: currentRoom._id,\n          content\n        });\n        newMessage = res.data;\n      }\n\n      // Emit to others. We don't setMessages here because the \n      // socket \"receive_message\" listener above will catch it for us too.\n      socket.emit(\"send_message\", newMessage);\n    } catch (err) {\n      console.error(\"Send error:\", err);\n    }\n  };\n  const handleCreateSubmit = async e => {\n    e.preventDefault();\n    try {\n      const res = await api.post(\"/rooms\", newRoomData);\n      setRooms(prev => [...prev, res.data]);\n      setCurrentRoom(res.data);\n      setIsCreating(false);\n      // Reset form\n      setNewRoomData({\n        name: \"\",\n        isPrivate: false,\n        showHistoryToNewMembers: true\n      });\n      if (res.data.isPrivate) {\n        alert(`Room Created! Invite Code: ${res.data.inviteCode}`);\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      alert(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Room creation failed\");\n    }\n  };\n  const handleJoinByCode = async e => {\n    e.preventDefault();\n    try {\n      const res = await api.post(\"/rooms/join\", {\n        inviteCode: inviteCodeInput\n      });\n      // Add room to list if not already there\n      setRooms(prev => prev.find(r => r._id === res.data._id) ? prev : [...prev, res.data]);\n      setCurrentRoom(res.data);\n      setInviteCodeInput(\"\");\n      setIsJoining(false);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      alert(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Invalid invite code\");\n    }\n  };\n  const handleSelectUser = async targetUser => {\n    try {\n      const res = await api.post(\"/rooms/private\", {\n        targetUserId: targetUser._id\n      });\n      setRooms(prev => prev.find(r => r._id === res.data._id) ? prev : [...prev, res.data]);\n      setCurrentRoom(res.data);\n      setIsCreating(false);\n      setIsJoining(false);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vh-100 d-flex justify-content-center align-items-center\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid p-0 bg-light\",\n    style: {\n      height: \"100vh\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex h-100 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(RoomList, {\n        rooms: rooms,\n        users: users,\n        currentUser: user,\n        currentRoomId: currentRoom === null || currentRoom === void 0 ? void 0 : currentRoom._id,\n        onSelectRoom: room => {\n          setCurrentRoom(room);\n          setIsCreating(false);\n          setIsJoining(false);\n        },\n        onSelectUser: handleSelectUser,\n        onJoinRoom: room => {\n          setCurrentRoom(room);\n        },\n        onCreateRoom: () => {\n          setIsCreating(true);\n          setIsJoining(false);\n        },\n        onLogout: handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-grow-1 bg-white d-flex flex-column position-relative\",\n        children: isCreating ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-5 mx-auto\",\n          style: {\n            maxWidth: \"500px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card shadow p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"mb-4\",\n              children: \"Create New Room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleCreateSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"small fw-bold text-muted\",\n                children: \"ROOM NAME\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-3\",\n                placeholder: \"e.g. Project Alpha\",\n                value: newRoomData.name,\n                onChange: e => setNewRoomData({\n                  ...newRoomData,\n                  name: e.target.value\n                }),\n                required: !newRoomData.isPrivate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-check form-switch mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-check-input\",\n                  type: \"checkbox\",\n                  id: \"isPrivate\",\n                  checked: newRoomData.isPrivate,\n                  onChange: e => setNewRoomData({\n                    ...newRoomData,\n                    isPrivate: e.target.checked\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-check-label\",\n                  htmlFor: \"isPrivate\",\n                  children: \"Private Room (Requires Code)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-check form-switch mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-check-input\",\n                  type: \"checkbox\",\n                  id: \"showHistory\",\n                  checked: newRoomData.showHistoryToNewMembers,\n                  onChange: e => setNewRoomData({\n                    ...newRoomData,\n                    showHistoryToNewMembers: e.target.checked\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-check-label\",\n                  htmlFor: \"showHistory\",\n                  children: \"Show Chat History to new members\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary w-100 mb-2\",\n                children: \"Create Room\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-link w-100 text-muted\",\n                onClick: () => setIsCreating(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this) : isJoining ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-5 mx-auto\",\n          style: {\n            maxWidth: \"400px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card shadow p-4 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"mb-4\",\n              children: \"Join Private Room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleJoinByCode,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-3 text-center fw-bold text-uppercase\",\n                style: {\n                  letterSpacing: '2px'\n                },\n                placeholder: \"ENTER CODE\",\n                value: inviteCodeInput,\n                onChange: e => setInviteCodeInput(e.target.value.toUpperCase()),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-success w-100 mb-2\",\n                children: \"Join Room\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-link w-100 text-muted\",\n                onClick: () => setIsJoining(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this) : currentRoom ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column h-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 border-bottom d-flex justify-content-between align-items-center bg-white shadow-sm\",\n            style: {\n              zIndex: 10\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"mb-0 fw-bold\",\n                children: currentRoom.isDirectMessage ? `Chat with ${((_users$find = users.find(u => {\n                  var _currentRoom$members$;\n                  return u._id === ((_currentRoom$members$ = currentRoom.members.find(m => m.user !== user._id)) === null || _currentRoom$members$ === void 0 ? void 0 : _currentRoom$members$.user);\n                })) === null || _users$find === void 0 ? void 0 : _users$find.username) || 'User'}` : currentRoom.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 20\n              }, this), currentRoom.isPrivate && /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-muted\",\n                children: [\"Invite Code: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-light text-dark\",\n                  children: currentRoom.inviteCode\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 89\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 46\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ChatBox, {\n            messages: messages,\n            currentUserId: user._id || user.id,\n            onSendText: txt => onSendMessage(txt),\n            onSendFile: file => onSendMessage(null, file)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-100 d-flex flex-column justify-content-center align-items-center text-center bg-light\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"display-1 text-muted mb-4 opacity-25\",\n            children: \"\\uD83D\\uDCAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-muted\",\n            children: \"Welcome to ChatBox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted small\",\n            children: \"Select a channel or user from the sidebar to start messaging.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"20jEiK8IcY1bBLWhQ2emKSnKsUk=\", false, function () {\n  return [useNavigate];\n});\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useEffect","useState","useCallback","api","ChatBox","RoomList","socket","useNavigate","jsxDEV","_jsxDEV","Chat","setToken","_s","_users$find","rooms","setRooms","users","setUsers","currentRoom","setCurrentRoom","messages","setMessages","user","setUser","loading","setLoading","isCreating","setIsCreating","isJoining","setIsJoining","inviteCodeInput","setInviteCodeInput","newRoomData","setNewRoomData","name","isPrivate","showHistoryToNewMembers","navigate","handleLogout","localStorage","removeItem","disconnect","storedUser","getItem","parsedUser","JSON","parse","connect","fetchData","roomsRes","usersRes","Promise","all","get","data","err","_err$response","response","status","off","roomId","_id","emit","username","then","res","catch","console","error","handleReceive","msg","prev","on","onSendMessage","content","file","newMessage","formData","FormData","append","post","handleCreateSubmit","e","preventDefault","alert","inviteCode","_err$response2","_err$response2$data","message","handleJoinByCode","find","r","_err$response3","_err$response3$data","handleSelectUser","targetUser","targetUserId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","height","currentUser","currentRoomId","onSelectRoom","room","onSelectUser","onJoinRoom","onCreateRoom","onLogout","maxWidth","onSubmit","placeholder","value","onChange","target","required","type","id","checked","htmlFor","onClick","letterSpacing","toUpperCase","zIndex","isDirectMessage","u","_currentRoom$members$","members","m","currentUserId","onSendText","txt","onSendFile","_c","$RefreshReg$"],"sources":["C:/Users/M PUJITHA/Downloads/realtime-chat-app/client/src/pages/Chat.js"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\nimport api from \"../services/api\"; \nimport ChatBox from \"../components/ChatBox\";\nimport RoomList from \"../components/RoomList\";\nimport socket from \"../services/socket\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Chat({ setToken }) {\n  const [rooms, setRooms] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [currentRoom, setCurrentRoom] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const [isCreating, setIsCreating] = useState(false);\n  const [isJoining, setIsJoining] = useState(false);\n\n  const [inviteCodeInput, setInviteCodeInput] = useState(\"\");\n  const [newRoomData, setNewRoomData] = useState({\n    name: \"\",\n    isPrivate: false,\n    showHistoryToNewMembers: true, // Default to true\n  });\n\n  const navigate = useNavigate();\n\n  const handleLogout = useCallback(() => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    if (setToken) setToken(null);\n    socket.disconnect();\n    navigate(\"/login\");\n  }, [navigate, setToken]);\n\n  /* ================= INITIAL LOAD ================= */\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (!storedUser) {\n      handleLogout();\n      return;\n    }\n\n    const parsedUser = JSON.parse(storedUser);\n    setUser(parsedUser);\n    socket.connect();\n\n    const fetchData = async () => {\n      try {\n        const [roomsRes, usersRes] = await Promise.all([\n          api.get(\"/rooms\"),\n          api.get(\"/auth/users\"),\n        ]);\n        setRooms(roomsRes.data);\n        setUsers(usersRes.data);\n      } catch (err) {\n        if (err.response?.status === 401) handleLogout();\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      socket.off(\"receive_message\");\n      socket.disconnect();\n    };\n  }, [handleLogout]);\n\n  /* ================= ROOM SYNC ================= */\n  useEffect(() => {\n    if (!currentRoom || !user) return;\n\n    const roomId = currentRoom._id;\n    socket.emit(\"join_room\", { roomId, username: user.username });\n\n    // Fetch message history based on backend logic\n    api.get(`/messages/${roomId}`)\n      .then((res) => setMessages(res.data))\n      .catch((err) => console.error(\"Message fetch error:\", err));\n\n    const handleReceive = (msg) => {\n      if (msg.roomId === roomId) {\n        setMessages((prev) => [...prev, msg]);\n      }\n    };\n\n    socket.on(\"receive_message\", handleReceive);\n\n    return () => {\n      socket.off(\"receive_message\", handleReceive);\n    };\n  }, [currentRoom, user]);\n\n  /* ================= HANDLERS ================= */\n  const onSendMessage = async (content, file = null) => {\n    if (!currentRoom) return;\n    try {\n      let newMessage;\n      if (file) {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"roomId\", currentRoom._id);\n        const res = await api.post(\"/messages/upload\", formData);\n        newMessage = res.data;\n      } else {\n        const res = await api.post(\"/messages\", { roomId: currentRoom._id, content });\n        newMessage = res.data;\n      }\n      \n      // Emit to others. We don't setMessages here because the \n      // socket \"receive_message\" listener above will catch it for us too.\n      socket.emit(\"send_message\", newMessage);\n    } catch (err) {\n      console.error(\"Send error:\", err);\n    }\n  };\n\n  const handleCreateSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await api.post(\"/rooms\", newRoomData);\n      setRooms((prev) => [...prev, res.data]);\n      setCurrentRoom(res.data);\n      setIsCreating(false);\n      // Reset form\n      setNewRoomData({ name: \"\", isPrivate: false, showHistoryToNewMembers: true });\n      \n      if (res.data.isPrivate) {\n        alert(`Room Created! Invite Code: ${res.data.inviteCode}`);\n      }\n    } catch (err) {\n      alert(err.response?.data?.message || \"Room creation failed\");\n    }\n  };\n\n  const handleJoinByCode = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await api.post(\"/rooms/join\", { inviteCode: inviteCodeInput });\n      // Add room to list if not already there\n      setRooms((prev) => prev.find(r => r._id === res.data._id) ? prev : [...prev, res.data]);\n      setCurrentRoom(res.data);\n      setInviteCodeInput(\"\");\n      setIsJoining(false);\n    } catch (err) {\n      alert(err.response?.data?.message || \"Invalid invite code\");\n    }\n  };\n\n  const handleSelectUser = async (targetUser) => {\n    try {\n      const res = await api.post(\"/rooms/private\", { targetUserId: targetUser._id });\n      setRooms((prev) => (prev.find((r) => r._id === res.data._id) ? prev : [...prev, res.data]));\n      setCurrentRoom(res.data);\n      setIsCreating(false);\n      setIsJoining(false);\n    } catch (err) { console.error(err); }\n  };\n\n  if (loading) return <div className=\"vh-100 d-flex justify-content-center align-items-center\">Loading...</div>;\n\n  return (\n    <div className=\"container-fluid p-0 bg-light\" style={{ height: \"100vh\" }}>\n      <div className=\"d-flex h-100 overflow-hidden\">\n        {/* Sidebar */}\n        <RoomList\n          rooms={rooms}\n          users={users}\n          currentUser={user}\n          currentRoomId={currentRoom?._id}\n          onSelectRoom={(room) => { setCurrentRoom(room); setIsCreating(false); setIsJoining(false); }}\n          onSelectUser={handleSelectUser}\n          onJoinRoom={(room) => { setCurrentRoom(room); }}\n          onCreateRoom={() => { setIsCreating(true); setIsJoining(false); }}\n          onLogout={handleLogout}\n        />\n\n        {/* Main Content */}\n        <div className=\"flex-grow-1 bg-white d-flex flex-column position-relative\">\n          {isCreating ? (\n            <div className=\"p-5 mx-auto\" style={{ maxWidth: \"500px\" }}>\n              <div className=\"card shadow p-4\">\n                <h3 className=\"mb-4\">Create New Room</h3>\n                <form onSubmit={handleCreateSubmit}>\n                  <label className=\"small fw-bold text-muted\">ROOM NAME</label>\n                  <input className=\"form-control mb-3\" placeholder=\"e.g. Project Alpha\" value={newRoomData.name} onChange={e => setNewRoomData({...newRoomData, name: e.target.value})} required={!newRoomData.isPrivate} />\n                  \n                  <div className=\"form-check form-switch mb-2\">\n                    <input className=\"form-check-input\" type=\"checkbox\" id=\"isPrivate\" checked={newRoomData.isPrivate} onChange={e => setNewRoomData({...newRoomData, isPrivate: e.target.checked})} />\n                    <label className=\"form-check-label\" htmlFor=\"isPrivate\">Private Room (Requires Code)</label>\n                  </div>\n\n                  <div className=\"form-check form-switch mb-4\">\n                    <input className=\"form-check-input\" type=\"checkbox\" id=\"showHistory\" checked={newRoomData.showHistoryToNewMembers} onChange={e => setNewRoomData({...newRoomData, showHistoryToNewMembers: e.target.checked})} />\n                    <label className=\"form-check-label\" htmlFor=\"showHistory\">Show Chat History to new members</label>\n                  </div>\n\n                  <button type=\"submit\" className=\"btn btn-primary w-100 mb-2\">Create Room</button>\n                  <button type=\"button\" className=\"btn btn-link w-100 text-muted\" onClick={() => setIsCreating(false)}>Cancel</button>\n                </form>\n              </div>\n            </div>\n          ) : isJoining ? (\n            <div className=\"p-5 mx-auto\" style={{ maxWidth: \"400px\" }}>\n              <div className=\"card shadow p-4 text-center\">\n                <h3 className=\"mb-4\">Join Private Room</h3>\n                <form onSubmit={handleJoinByCode}>\n                  <input className=\"form-control mb-3 text-center fw-bold text-uppercase\" style={{ letterSpacing: '2px' }} placeholder=\"ENTER CODE\" value={inviteCodeInput} onChange={e => setInviteCodeInput(e.target.value.toUpperCase())} required />\n                  <button type=\"submit\" className=\"btn btn-success w-100 mb-2\">Join Room</button>\n                  <button type=\"button\" className=\"btn btn-link w-100 text-muted\" onClick={() => setIsJoining(false)}>Cancel</button>\n                </form>\n              </div>\n            </div>\n          ) : currentRoom ? (\n            <div className=\"d-flex flex-column h-100\">\n              <div className=\"p-3 border-bottom d-flex justify-content-between align-items-center bg-white shadow-sm\" style={{zIndex: 10}}>\n                 <div>\n                   <h6 className=\"mb-0 fw-bold\">{currentRoom.isDirectMessage ? `Chat with ${users.find(u => u._id === currentRoom.members.find(m => m.user !== user._id)?.user)?.username || 'User'}` : currentRoom.name}</h6>\n                   {currentRoom.isPrivate && <small className=\"text-muted\">Invite Code: <span className=\"badge bg-light text-dark\">{currentRoom.inviteCode}</span></small>}\n                 </div>\n              </div>\n              <ChatBox \n                messages={messages} \n                currentUserId={user._id || user.id} \n                onSendText={(txt) => onSendMessage(txt)} \n                onSendFile={(file) => onSendMessage(null, file)}\n              />\n            </div>\n          ) : (\n            <div className=\"h-100 d-flex flex-column justify-content-center align-items-center text-center bg-light\">\n              <div className=\"display-1 text-muted mb-4 opacity-25\">ðŸ’¬</div>\n              <h4 className=\"text-muted\">Welcome to ChatBox</h4>\n              <p className=\"text-muted small\">Select a channel or user from the sidebar to start messaging.</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}